"format cjs";!function(){"use strict";if(typeof window!=="object"||!window)return;var config={indicateLoadAfter:250,onIndicateLoadStart:function(){document.documentElement.style.transition="opacity linear 0.05s";document.documentElement.style.opacity="0.8"},onIndicateLoadEnd:function(){document.documentElement.style.transition=null;document.documentElement.style.opacity=null}};var currentXhr=null;var lastPathname,lastQuery;rememberPath();var id=0;var scripts=Object.create(null);if(typeof history.pushState!=="function")return;document.addEventListener("click",function(event){var anchor=event.target;do{if(anchor instanceof HTMLAnchorElement)break}while(anchor=anchor.parentElement);if(!anchor)return;if(event.button!==0)return;if(event.altKey||event.ctrlKey||event.metaKey||event.shiftKey)return;if(anchor.protocol+"//"+anchor.host!==location.origin)return;if(anchor.pathname===location.pathname&&!!anchor.hash)return;event.preventDefault();transitionTo(anchor,true)});window.addEventListener("popstate",function(event){if(pathUnchanged())return;rememberPath();transitionTo(location,false)});function transitionTo(urlUtil,isPush){var href=urlUtil.href;if(isPush&&urlUtil.href===location.href)return;if(!!currentXhr)return;var xhr=currentXhr=new XMLHttpRequest;xhr.onload=function(){if(xhr.status<200||xhr.status>299){if(isPush)history.pushState(null,"",href);xhr.onerror(null);return}var newDocument=getDocument(xhr);if(!newDocument){xhr.onerror(null);return}syncDocument(newDocument);indicateLoadEnd();if(isPush){history.pushState(null,newDocument.title,href);rememberPath()}var target=location.hash?document.getElementById(location.hash.slice(1)):null;if(target instanceof HTMLElement){target.scrollIntoView()}else if(isPush&&(!(urlUtil instanceof HTMLElement)||!urlUtil.hasAttribute("data-noscroll"))){window.scrollTo(0,0)}document.dispatchEvent(createEvent("DOMContentLoaded"))};xhr.onabort=xhr.onerror=xhr.ontimeout=function(){indicateLoadEnd();location.reload()};xhr.open("GET",href);xhr.responseType="document";xhr.send(null);indicateLoadStart(xhr)}function indicateLoadStart(xhr){if((config.indicateLoadAfter|0)>0){var id_1=setTimeout(function(){if(xhr.readyState===4){clearTimeout(4);return}if(typeof config.onIndicateLoadStart==="function"){config.onIndicateLoadStart()}},config.indicateLoadAfter)}}function indicateLoadEnd(){if(typeof config.onIndicateLoadEnd==="function"){config.onIndicateLoadEnd()}currentXhr=null}function getDocument(xhr){if(xhr.responseXML)return xhr.responseXML;var parser=new DOMParser;return parser.parseFromString(xhr.responseText,"text/html")}function syncDocument(doc){document.title=doc.title;registerExistingScripts();removeKnownScripts(doc);var pairs=replaceScriptsWithPlaceholders(doc);document.body=doc.body;replacePlaceholdersWithScripts(pairs)}function registerExistingScripts(){for(var i=0;i<document.scripts.length;++i){var script=document.scripts[i];if(script.src)scripts[script.src]=null}}function removeKnownScripts(doc){[].slice.call(doc.scripts).forEach(function(script){if(script.src in scripts&&script.parentNode){script.parentNode.removeChild(script)}})}function replaceScriptsWithPlaceholders(doc){return[].slice.call(doc.scripts).map(function(script){var holder=document.createElement("script");script.parentNode.insertBefore(holder,script);script.parentNode.removeChild(script);return{holder:holder,script:script}})}function replacePlaceholdersWithScripts(pairs){for(var i=0;i<pairs.length;++i){var holder=pairs[i].holder;var script=pairs[i].script;if(!holder.parentNode)continue;if(!destroysDocument(script)){holder.parentNode.insertBefore(copyScript(script),holder)}holder.parentNode.removeChild(holder)}}function copyScript(script){var copy=document.createElement("script");["id","src","async","defer","type","charset","textContent"].forEach(function(propName){if(script[propName])copy[propName]=script[propName]});return copy}function destroysDocument(script){return/document\s*\.\s*(?:write|open)\s*\(/.test(script.textContent)}function rememberPath(){lastPathname=location.pathname;lastQuery=location.search}function pathUnchanged(){return location.pathname===lastPathname&&location.search===lastQuery}if(typeof module==="object"&&module&&module.exports){module.exports=config}else{window.simplePjaxConfig=config}function createEvent(name){var event=document.createEvent("Event");event.initEvent(name,true,true);return event}}();
